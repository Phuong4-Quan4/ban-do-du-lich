
<!DOCTYPE html>
<html>
<head>
  <title>Bản đồ Phường 4, Quận 4</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <style>
    #map { height: 100vh; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
    var map = L.map('map').setView([10.7575, 106.7035], 17);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '© OpenStreetMap contributors'
    }).addTo(map);

    fetch('./ranh-gioi.geojson')
      .then(res => res.json())
      .then(data => {
        // Viền trắng dày
        L.geoJSON(data, {
          style: {
            color: 'white',
            weight: 8,
            fillOpacity: 0
          }
        }).addTo(map);

        // Lớp chính với hiệu ứng và hoa
        var geojson = L.geoJSON(data, {
          style: {
            color: 'red',
            weight: 3,
            fillColor: '#ffcccc',
            fillOpacity: 0.4
          },
          onEachFeature: function (feature, layer) {
            layer.on({
              mouseover: function (e) {
                e.target.setStyle({
                  weight: 5,
                  color: 'orange',
                  fillOpacity: 0.6
                });
              },
              mouseout: function (e) {
                geojson.resetStyle(e.target);
              }
            });

            // Chèn biểu tượng bông hoa dọc theo đường ranh giới
            const coords = feature.geometry.coordinates[0];
            for (let i = 0; i < coords.length; i += 1) {
              if (i % 2 === 0) {
                const latlng = [coords[i][1], coords[i][0]];
                const flowerIcon = L.icon({
                  iconUrl: 'https://upload.wikimedia.org/wikipedia/commons/thumb/f/f6/Emoji_u1f33c.svg/32px-Emoji_u1f33c.svg.png',
                  iconSize: [24, 24],
                  iconAnchor: [12, 12]
                });
                L.marker(latlng, { icon: flowerIcon }).addTo(map);
              }
            }

            if (feature.properties && feature.properties.name) {
              layer.bindPopup("<b>Ranh giới:</b> " + feature.properties.name);
            }
          }
        }).addTo(map);
      });
  </script>
</body>
</html>
